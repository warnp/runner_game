sudo: false

language: rust

rust:
  - stable
  - nightly
matrix:
  allow_failures:
    - rust: nightly

env:
    matrix:
    - FEATURES='' TEST=0 COVERAGE=0
    - FEATURES='glutin' TEST=1 COVERAGE=1
    
script:
    # We run everything with `-j 1` or travis runs out of memory
    - cargo build -v --no-default-features --features "$FEATURES"
    - if [ "$TEST" -eq 1 ]; then cargo test -v -j 1 --no-default-features --features "$FEATURES"; fi
